<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ | Netflix Store</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <a href="index.html" class="logo">NETFLIX</a>
    </header>

    <div class="container">
        <div class="status-page-box reveal">
            <div id="status-content" style="text-align:center;">
                <h2 id="status-title">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø·Ù„Ø¨Ùƒ...</h2>
                <div id="order-details" style="margin-top:30px;">
                    </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        async function checkStatus() {
            const id = new URLSearchParams(window.location.search).get('id');
            const res = await fetch(`${SERVER_URL}/order-status/${id}`);
            const data = await res.json();
            
            const details = document.getElementById('order-details');
            if(data.status === 'pending') {
                document.getElementById('status-title').innerText = "Ø§Ù„Ø·Ù„Ø¨ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© â³";
                details.innerHTML = "<p style='color:#888;'>Ø³ÙˆÙ ØªØ¸Ù‡Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ù‡Ù†Ø§ ÙÙˆØ± Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† Ù„Ù„Ø·Ù„Ø¨.</p>";
            } else {
                document.getElementById('status-title').innerText = "ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰";
                document.getElementById('status-title').style.color = "var(--success)";
                
                if(data.requiresCode) {
                    details.innerHTML = `
                        <div class="reveal-scale" style="background:#111; padding:20px; border-radius:15px; border:1px solid var(--primary);">
                            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„:</strong> ${data.profileName}</p>
                            <p><strong>PIN:</strong> <span style="font-size:1.5rem; color:var(--primary); font-weight:800;">${data.profilePin}</span></p>
                            <hr style="border-color:#222;">
                            <p style="font-size:0.8rem; color:#666;">Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: ${data.accountEmail}</p>
                        </div>`;
                } else {
                    details.innerHTML = `
                        <div class="reveal-scale" style="background:#111; padding:20px; border-radius:15px; border:1px solid var(--success);">
                            <p><strong>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</strong> ${data.accountEmail}</p>
                            <p><strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> ${data.accountPassword}</p>
                        </div>`;
                }
            }
        }
        window.onload = checkStatus;
    </script>
</body>
</html>
