<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix Store | ุงููุชุฌุฑ ุงูุฑุณูู</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- NEW: Notification Container -->
    <div id="notification-container"></div>

    <header>
        <a href="index.html" class="logo">NETFLIX <span style="font-size:0.5em; color:var(--text-light); font-weight:300;">STORE</span></a>
        <div id="user-session">
            <!-- Dynamic user session UI will be injected here -->
        </div>
    </header>

    <div class="container">
        <div class="hero">
            <h2>ุงุดุชุฑุงูุงุชู ุงูููุถูุฉุ ููุฑุงู.</h2>
            <p>ุฃุฑุฎุต ุงูุฃุณุนุงุฑุ ุถูุงู ูุงููุ ูุฏุนู ููู ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ.</p>
        </div>

        <div class="section-title">
            <i class="fas fa-fire"></i>
            <h3>ุงูุจุงูุงุช ุงููุชุงุญุฉ</h3>
        </div>
        
        <div id="products-container" class="grid">
            <div class="loader"></div>
        </div>

        <div class="my-orders-section">
            <div class="section-title">
                <i class="fas fa-history"></i>
                <h3>ุณุฌู ุทูุจุงุชู</h3>
            </div>
            <div id="my-orders-list" style="margin-top:20px;">
                <!-- User's orders will be injected here -->
            </div>
        </div>
    </div>

    <!-- UPDATED: Buy Modal -->
    <div id="buyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅููุงู ุงูุทูุจ ๐</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            
            <p style="color:var(--text-dark); font-size:0.9rem; margin-bottom:10px;">
                ุฃูุช ุนูู ูุดู ุดุฑุงุก: <span id="modal-product-name" style="color:var(--primary); font-weight:bold;"></span>
            </p>
            
            <!-- NEW: Product Description in Modal -->
            <div id="modal-product-description"></div>

            <form id="purchaseForm" onsubmit="submitOrder(event)">
                <input type="hidden" id="modal-product-id" name="productId">
                
                <div class="form-group">
                    <label>ุฑูู ุงููุญูุธุฉ (ููุฏุงููู ูุงุด)</label>
                    <div style="position:relative;">
                        <i class="fas fa-mobile-alt" style="position:absolute; right:15px; top:50%; transform: translateY(-50%); color:var(--text-muted);"></i>
                        <input type="text" name="userPhone" class="form-input" placeholder="010xxxxxxxx" style="padding-right:45px;" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>ุฅูุตุงู ุงูุชุญููู</label>
                    <label class="file-upload-wrapper" for="receipt-file">
                        <div class="upload-content">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span id="file-label-text">ุงุถุบุท ูุฅุฑูุงู ุตูุฑุฉ ุงูุชุญููู</span>
                        </div>
                        <input type="file" id="receipt-file" name="receipt" accept="image/*" required onchange="updateFileName(this)">
                    </label>
                </div>

                <button type="submit" class="btn">
                    <i class="fas fa-check-circle"></i> ุชุฃููุฏ ุงูุดุฑุงุก
                </button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function updateFileName(input) {
            const labelText = document.getElementById('file-label-text');
            const uploadContent = input.previousElementSibling;
            if(input.files && input.files[0]) {
                labelText.textContent = "ุชู ุงุฎุชูุงุฑ: " + input.files[0].name;
                uploadContent.style.color = "var(--success)";
            } else {
                labelText.textContent = "ุงุถุบุท ูุฅุฑูุงู ุตูุฑุฉ ุงูุชุญููู";
                uploadContent.style.color = "var(--text-muted)";
            }
        }

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = 1;
                    entry.target.style.transform = 'translateY(0)';
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.addEventListener('DOMContentLoaded', () => {
             document.querySelectorAll('.section-title, .my-orders-section').forEach(el => {
                el.style.opacity = 0;
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
                observer.observe(el);
            });
        });
    </script>
</body>
</html>
